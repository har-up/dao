# 验收测试
专业开发人员既要做好开发，也要做好沟通。“输入糟糕，输出也会糟糕”对程序员同样适用，所以程序员会重视与团队以及业务部门的沟通，确保这种沟通的准确，流畅。

## 需求的沟通
现实中，关于需求的沟通是极其困难的，其中会出现各种问题

### 过早精细化
做业务的人和写程序的人都容易陷入一个陷阱，即过早精细化。业务方还没有启动项目，就要精确的知道最后能得到什么；开发方还没有评估整个项目，就希望精确知道
交付什么，双方都贪求不现实的准确性，而且经常愿意花费大量的时间和价钱来追求这种准确。

- 不确定原则
问题在于，东西画在纸上与真正做出来，是不一样的。业务方看到真正运行情况时就会意识到，自己想要的根本不是这样的。一看到已经满足的需求，关于到底要什么，他们就
会冒出更好的想法——通常并不是他们当时看到的样子
在工作中，有一种现象叫观察者效应，或者不确定原则。每次你向业务方展示一项功能，他们就获得了比之前更多的信息，这些新的信息反过来优惠影响他们对整个系统的看法。
最终结果就是，需求完成的越精细，就越容易被忽视，系统因此也谈不上完工。

- 预估焦虑
开发人员也会掉进精确化的陷阱。他们知道必须评估整个系统，而且通常认为需要精确评估。但是，事实并非如此。
首先，即便拥有全面准确的信息，评估也通常会存在巨大的变数。其次，因为不确定原则的存在，不可能通过反复推敲实现早期的精确性。需求是一定会变化的。
所以追求那种精确性是徒劳的。

### 迟来的模糊性
避免过早精细化的办法是尽可能的推迟精细化。专业开发人员知道开发的前一刻才会把需求具体化。但是，这可能造成另一个问题：迟来的模糊性。
需求文档的没一点模糊之处，都对应者业务方的一点分歧。当然，模糊不只来自于分歧或争论。有时候，业务方会想当然地认为看文档的人懂自己的意思。
在具体的语境中看来，意思可能是非常清楚的，但是对阅读文档的程序员来说，意思可能截然不同。即便客户与程序员当面沟通，也可能出现因语境产生的模糊。

## 验收测试
### 完成的定义
完成 意味着所有的代码都写完了，所有的测试都通过了，QA和需求方已经认可。这，才是完成。

### 沟通 
验收测试的目的是沟通，澄清，精确化。开发方、业务方、测试方对验收测试达成共识，大家都能明白系统的行为将是怎样的。
在专业开发人员看来，与业务方，测试方协同工作，确保大家都明白要做的是什么，是自己的责任。

### 自动化
验收测试都应当自动进行。在软件开发的周期中，确实有时候需要手动测试，但是验收测试不应当手工进行，原因很简单：要考虑成本。

### 验收测试什么时候写，由谁来写
理想转态下，业务方和QA会写作编写这些测试，程序员来检查测试之间是否有冲突或矛盾。但实际上，业务方通常没有时间，或者有时间也难以达到所需要的
细致程度，所以他们通常会把测试交给业务分析员、QA甚至开发人员。如果只能由开发人员来写测试，应当确保写测试的程序员和开发者不是同一个人。
通常，业务分析员测试“正确路径”，以证明功能的业务价值；QA则测试“错误路径”、边界条件，异常，例外情况，因为QA的职责是考虑哪些部分可能出现问题。

遵循“推迟精细化”的原则，验收测试应该越晚越好，通常是功能执行完成的前几天。在敏捷项目中，只有在选定了下一轮迭代或当前冲刺所需要的功能之后，才编写测试。

### 开发人员的角色
实现某项功能的代码，应该在对应的验收测试完成后开始。开发人员运行这些验收测试，观察失败的原因，将验收测试与系统联系起来，然后实现需要的功能，让测试通过。

### 测试的协商与被动推进
写测试的人也可能犯错误。有时候，你刚开始实现某个功能，就会发现有些测试没有什么意义。有些太复杂，有些不灵活，有些包含愚蠢的假定，还有些干脆就是错误的。
如果你是开发人员，要想通过这些测试可不轻松。
身为专业开发人员，与编写测试的人协商并改进测试是你的职责。决不能被动接受测试，更不能对自己说“不，测试是这么要求的，我就得这么办”
身为专业开发人员，你的职责是协助团队开发出最棒的软件。也就是说，每个人都需要关心错误和疏忽并协力改正。

### 验收测试和单元测试
验收测试不是单元测试。单元测试是程序员写给程序员的，它是正式的设计文档，描述了底层结构及代码的行为。关心单元测试结果的是程序员而不是业务人员。

验收测试是业务方写给业务方的。他们是正式的需求文档描述了业务方认为系统应该如何运行。关心验收测试结果的是业务方和程序员。


### 图形界面以及其他复杂因素
编写GUI的验收测试是很麻烦的。但GUI后边的业务逻辑功能是一样的，可以给按钮加上ID，验证按钮的点击效果。
恰当的界面测试：更好的办法是，测试系统的功能时，应当调用真实的API，而不是GUI，测试程序应当直接调用GUI使用的API，这并不是什么新鲜事。几十年来，设计专家
一直在教导我们，要把GUI和业务逻辑分开。
应当尽可能的减少GUI的测试。GUI很容易发生变化，所以这类测试很不稳定。GUI的测试越多，维护它们的难度就越大

### 持续集成
请务必确保在持续集成系统中，单元测试和验收测试每天都能运行好几次。整套持续集成系统应该由源代码管理系统来触发。只要有人提交了代码，持续集成系统就开始构建，
并运行所有的测试，测试结果会用电子邮件发送给团队的所有人。